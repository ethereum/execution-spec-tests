# Fuzzer Bridge Examples

This directory contains example fuzzer outputs in the v2.0 JSON format. These examples demonstrate the comprehensive transaction coverage generated by the fuzzer and serve as test cases for the fuzzer bridge implementation.

## Format Overview

All examples use fuzzer output format v2.0 with the following structure:

```json
{
  "version": "2.0",
  "fork": "Osaka",
  "chainId": "0x01",
  "accounts": { ... },
  "transactions": [ ... ],
  "env": { ... },
  "parentBeaconBlockRoot": "0x..."
}
```

## Example Files

### comprehensive_smallest.json (56K)
- **Size**: Smallest example (56K)
- **Transactions**: 17 transactions
- **Accounts**: 25-26 accounts with private keys
- **Transaction Types**: Legacy, EIP-1559, EIP-4844 (blobs), EIP-7702 (authorization lists)
- **Features**: Parent beacon block root (EIP-4788)
- **Use Case**: Minimal comprehensive example for quick testing

### comprehensive_medium_1.json (62K)
- **Size**: Medium-sized example (62K)
- **Transactions**: 17 transactions
- **Accounts**: 25-26 accounts
- **Transaction Types**: Full spectrum including blob transactions (6 blob hashes per tx)
- **Authorization Lists**: 5 authorization tuples per EIP-7702 transaction
- **Use Case**: Balanced example with typical transaction data sizes

### comprehensive_medium_2.json (66K)
- **Size**: Medium-sized example (66K)
- **Transactions**: 17 transactions
- **Accounts**: 25-26 accounts
- **Transaction Types**: All major transaction types
- **Features**: Variety of calldata sizes (2-400 bytes)
- **Use Case**: Testing different data payload sizes

### comprehensive_large.json (70K)
- **Size**: Large example (70K)
- **Transactions**: 17 transactions
- **Accounts**: 25-26 accounts
- **Transaction Types**: Complete coverage
- **Features**: Larger calldata payloads (up to 600 bytes)
- **Use Case**: Testing with substantial transaction data

### comprehensive_largest.json (74K)
- **Size**: Largest example (74K)
- **Transactions**: 17 transactions
- **Accounts**: 25-26 accounts
- **Transaction Types**: All types including largest blob transactions
- **Features**: Maximum calldata sizes (up to 690 bytes)
- **Use Case**: Stress testing with largest transaction payloads

## Common Features Across All Examples

All examples include:

1. **EIP-1559 Transactions**: Dynamic fee transactions with `maxFeePerGas` and `maxPriorityFeePerGas`
2. **EIP-4844 Blob Transactions**: Transactions with `blobVersionedHashes` and `maxFeePerBlobGas`
3. **EIP-7702 Set-Code Transactions**: Transactions with `authorizationList` containing signed authorization tuples
4. **Legacy Transactions**: Traditional transactions with `gasPrice`
5. **EIP-4788 Support**: `parentBeaconBlockRoot` set in environment
6. **Private Keys**: All sender accounts include `privateKey` field for transaction signing
7. **Storage**: Accounts with non-empty storage mappings
8. **Code**: Accounts with deployed bytecode

## Field Mappings (Fuzzer JSON-RPC → EEST)

The fuzzer uses standard Ethereum JSON-RPC transaction format:

| Fuzzer Field | EEST Field | Description |
|-------------|-----------|-------------|
| `gas` | `gas_limit` | Gas limit for transaction |
| `data` | `data` | Transaction calldata |
| `from` | `sender` | Transaction sender (mapped to EOA) |
| `gasPrice` | `gas_price` | Gas price (legacy transactions) |
| `maxFeePerGas` | `max_fee_per_gas` | Max fee per gas (EIP-1559) |
| `maxPriorityFeePerGas` | `max_priority_fee_per_gas` | Max priority fee (EIP-1559) |
| `blobVersionedHashes` | `blob_versioned_hashes` | Blob hashes (EIP-4844) |
| `maxFeePerBlobGas` | `max_fee_per_blob_gas` | Max blob fee (EIP-4844) |
| `authorizationList` | `authorization_list` | Authorization tuples (EIP-7702) |

## Usage

These examples can be used with the fuzzer bridge CLI:

```bash
# Convert a single example to blockchain test
uv run python -m cli.fuzzer_bridge.cli \
    --input src/cli/fuzzer_bridge/examples/comprehensive_medium_1.json \
    --output /tmp/blocktest_output

# Batch convert all examples
for example in src/cli/fuzzer_bridge/examples/*.json; do
    uv run python -m cli.fuzzer_bridge.cli \
        --input "$example" \
        --output "/tmp/$(basename "$example" .json)"
done
```

## Old Examples

Previous examples (before format evolution and bug fixes) are preserved in the `old_examples/` subdirectory for reference.

## Generation

These examples were generated using the fuzzer with comprehensive transaction coverage enabled. The fuzzer automatically generates:

- Multiple transaction types per test
- Accounts with various states (empty, funded, with code, with storage)
- Realistic transaction ordering and nonce sequences
- Private keys for all sender accounts
- Post-merge environment (PoS consensus)

## Testing Coverage

Each example provides test coverage for:

- ✅ Transaction parsing (all field types)
- ✅ Account state initialization
- ✅ EOA creation from private keys
- ✅ Gas limit calculations
- ✅ Blob transaction handling
- ✅ Authorization list processing
- ✅ Environment setup (including beacon root)
- ✅ Multi-transaction block generation

## Notes

- All examples use Osaka fork
- All examples use chain ID 1 (mainnet)
- All transactions have sufficient gas (16,000,000 gas limit)
- All sender accounts have private keys for signing
- Environment includes realistic post-merge values (difficulty=0, prevRandao set)
