<!DOCTYPE html>
<html lang="en-us">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        
        <style>

    html body {
        font-family: '', sans-serif;
        background-color: white;
    }

    :root {
        --accent: #2196F3;
        --border-width:  0 ;
    }

</style>


<link rel="stylesheet" href="http://localhost:1313/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=">





<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" crossorigin="anonymous">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
 






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.148.0">
        


        
            <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        

        <link rel="stylesheet" href="http://localhost:1313/css/callouts.css">
    </head>

    <body>
        

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand visible-xs" href="#"></a>
                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    
                    
                </div>
            </div>
        </nav>


<main>

    <div>
        <h2></h2>
        <h5></h5>
        

    </div>

    <div align="start" class="content"><h1 id="types-of-tests">Types of tests</h1>
<p>There are currently three types of tests that can be produced by a test spec:</p>
<ol>
<li>State Tests</li>
<li>Blockchain Tests</li>
<li>Transaction Tests</li>
</ol>
<h2 id="state-tests">State Tests</h2>
<h3 id="purpose">Purpose</h3>
<p>Tests the effects of individual transactions (ideally a single one) that span a single block in a controlled environment.</p>
<h3 id="use-cases">Use cases</h3>
<ul>
<li>Test a single opcode behavior.</li>
<li>Verify opcode gas costs.</li>
<li>Test interactions between multiple smart contracts.</li>
<li>Test creation of smart contracts.</li>
</ul>
<p>!!! info</p>
<pre><code>The fill function will automatically generate a `blockchain_test` fixture from `state_tests`, consisting of one block and one transaction.
</code></pre>
<h2 id="blockchain-tests">Blockchain Tests</h2>
<h3 id="purpose-1">Purpose</h3>
<p>Blockchain tests span multiple blocks which may or may not contain transactions and mainly focus on the block to block effects to the Ethereum state.</p>
<h3 id="use-cases-1">Use cases</h3>
<ul>
<li>Verify system-level operations such as coinbase balance updates or withdrawals.</li>
<li>Verify fork transitions.</li>
<li>Verify blocks with invalid transactions/properties are rejected.</li>
</ul>
<h3 id="fork-transition-tests">Fork Transition Tests</h3>
<p>There is a special type of blockchain test that is used to test a fork transition. It&rsquo;s not executed for all possible forks, rather it targets exactly the blocks at the point of transition from one evm implementation to the next. This type of test must be marked with the <code>valid_at_transition_to</code> marker, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@pytest.mark.valid_at_transition_to</span>(<span style="color:#e6db74">&#34;Cancun&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_blob_type_tx_pre_fork</span>(
</span></span><span style="display:flex;"><span>    blockchain_test: BlockchainTestFiller,
</span></span><span style="display:flex;"><span>    pre: Dict,
</span></span><span style="display:flex;"><span>    env: Environment,
</span></span><span style="display:flex;"><span>    blocks: List[Block],
</span></span><span style="display:flex;"><span>):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Reject blocks with blobs before blobs fork
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span></code></pre></div><h2 id="transaction-tests">Transaction Tests</h2>
<h3 id="purpose-2">Purpose</h3>
<p>Test correct transaction rejection/acceptance of a serialized transaction (currently RLP only).</p>
<h3 id="use-cases-2">Use cases</h3>
<ul>
<li>Verify that a badly formatted transaction is correctly rejected by the client.</li>
<li>Verify that a transaction with an invalid value in one of its fields is correctly rejected by the client.</li>
</ul>
<p>!!! info</p>
<pre><code>Using the `execute` command, transaction tests can be sent to clients in a live network using the `eth_sendRawTransaction` endpoint.
</code></pre>
<h2 id="deciding-on-a-test-type">Deciding on a test type</h2>
<h3 id="prefer-state_test-for-single-transactions">Prefer <code>state_test</code> for single transactions</h3>
<p>Whenever possible, use <code>state_test</code> to examine individual transactions. This method is more straightforward and less prone to external influences that can occur during block building.</p>
<p>This provides more targeted testing since it does not invoke the client&rsquo;s block-building machinery. This reduces the risk of encountering false positives, particularly in exception scenarios (e.g., see issue <a href="https://github.com/ethereum/execution-spec-tests/issues/343">#343: &ldquo;Zero max_fee_per_blob_gas test is ineffective&rdquo;</a>).</p>
<p>Moreover, the <code>fill</code> command automatically additionally generates a <code>blockchain_test</code> for every <code>state_test</code> by wrapping the <code>state_test</code>&rsquo;s transaction in a block.</p>
</div>

</main>

        <footer>
            <p class="copyright text-muted">Â© All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>.</p>
        </footer>

        

        
    </body>

</html>

